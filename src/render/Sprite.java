package render;

public class Sprite {

	// tiles
	public static Sprite DIRT_N;
	public static Sprite DIRT;
	public static Sprite DIRT_W;
	public static Sprite DIRT_E;
	public static Sprite DIRT_NW_CRUST;
	public static Sprite DIRT_NE_CRUST;
	public static Sprite DIRT_NE;
	public static Sprite DIRT_NW;
	public static Sprite BRUSH;
	public static Sprite DIRT_STAIRS;

	public static Sprite MushRoomFloor;
	public static Sprite FLOOR;
	public static Sprite WALL_W;
	public static Sprite WALL_E;
	public static Sprite CEILING;
	public static Sprite WALL_SW_CRUST;
	public static Sprite WALL_SE_CRUST;
	public static Sprite WALL_SW;
	public static Sprite WALL_SE;
	public static Sprite VOID;

	public static Sprite FOUNTAIN_1;
	public static Sprite FOUNTAIN_2;
	public static Sprite FOUNTAIN_3;

	public static Sprite CAVE_UNDERLAY_1;
	public static Sprite VOLCANO_UNDERLAY_1;
	public static Sprite LAVA_1;
	public static Sprite LAVA_2;
	public static Sprite LAVA_3;
	public static Sprite LAVA_4;
	public static Sprite FARM_UNDERLAY_1;

	public static Sprite ROOM_ONION_UNDERLAY;

	public static Sprite W_UNDERLAY_1;
	public static Sprite W_UNDERLAY_2;
	public static Sprite W_UNDERLAY_3;
	public static Sprite W_UNDERLAY_4;
	public static Sprite W_UNDERLAY_5;
	public static Sprite W_UNDERLAY_6;
	public static Sprite W_OVERLAY_1;
	public static Sprite W_OVERLAY_2;
	public static Sprite W_OVERLAY_3;
	public static Sprite W_OVERLAY_4;

	public static Sprite NW_UNDERLAY_1;
	public static Sprite NW_UNDERLAY_2;
	public static Sprite NW_UNDERLAY_3;
	public static Sprite NW_UNDERLAY_4;
	public static Sprite NW_UNDERLAY_5;
	public static Sprite NW_UNDERLAY_6;
	public static Sprite NW_UNDERLAY_7;
	public static Sprite NW_UNDERLAY_8;
	public static Sprite NW_UNDERLAY_9;
	public static Sprite NW_UNDERLAY_10;
	public static Sprite NW_UNDERLAY_11;
	public static Sprite NW_UNDERLAY_12;
	public static Sprite NW_UNDERLAY_13;
	public static Sprite NW_UNDERLAY_14;
	public static Sprite NW_UNDERLAY_15;
	public static Sprite NW_UNDERLAY_16;
	public static Sprite NW_UNDERLAY_17;
	public static Sprite NW_UNDERLAY_18;
	public static Sprite NW_UNDERLAY_19;
	public static Sprite NW_UNDERLAY_20;
	public static Sprite NW_UNDERLAY_21;
	public static Sprite NW_UNDERLAY_22;
	public static Sprite NW_UNDERLAY_23;
	public static Sprite NW_UNDERLAY_24;
	public static Sprite NW_UNDERLAY_25;
	public static Sprite NW_UNDERLAY_26;
	public static Sprite NW_OVERLAY_1;
	public static Sprite NW_OVERLAY_2;
	public static Sprite NW_OVERLAY_3;
	public static Sprite NW_OVERLAY_4;
	public static Sprite NW_OVERLAY_5;
	public static Sprite NW_OVERLAY_6;
	public static Sprite NW_OVERLAY_7;
	public static Sprite NW_OVERLAY_8;
	public static Sprite NW_OVERLAY_9;
	public static Sprite NW_OVERLAY_10;
	public static Sprite NW_OVERLAY_11;
	public static Sprite NW_OVERLAY_12;
	public static Sprite NW_OVERLAY_13;

	public static Sprite N_UNDERLAY_1;
	public static Sprite N_UNDERLAY_2;
	public static Sprite N_UNDERLAY_3;
	public static Sprite N_UNDERLAY_4;
	public static Sprite N_OVERLAY_1;
	public static Sprite N_OVERLAY_2;
	public static Sprite N_OVERLAY_3;
	public static Sprite N_OVERLAY_4;
	public static Sprite N_OVERLAY_5;
	public static Sprite N_OVERLAY_6;

	public static Sprite NE_UNDERLAY_1;
	public static Sprite NE_UNDERLAY_2;
	public static Sprite NE_UNDERLAY_3;
	public static Sprite NE_UNDERLAY_4;
	public static Sprite NE_UNDERLAY_5;
	public static Sprite NE_OVERLAY_1;
	public static Sprite NE_OVERLAY_2;
	public static Sprite NE_OVERLAY_3;

	public static Sprite SE_UNDERLAY_1;
	public static Sprite SE_OVERLAY_1;

	public static Sprite E_OVERLAY_1;
	public static Sprite E_OVERLAY_2;
	public static Sprite E_OVERLAY_3;
	public static Sprite E_OVERLAY_4;
	public static Sprite E_UNDERLAY_1;
	public static Sprite E_UNDERLAY_2;

	public static Sprite C_UNDERLAY_1;
	public static Sprite C_UNDERLAY_2;
	public static Sprite C_UNDERLAY_3;
	public static Sprite C_OVERLAY_1;
	public static Sprite C_OVERLAY_2;
	public static Sprite C_OVERLAY_3;
	public static Sprite C_OVERLAY_4;

	public static Sprite S_OVERLAY_1;
	public static Sprite S_OVERLAY_2;
	public static Sprite S_OVERLAY_3;
	public static Sprite S_UNDERLAY_1;
	public static Sprite S_UNDERLAY_2;

	// water
	public static Sprite[] CLIFF;
	public static Sprite[] WATER;
	public static Sprite[] WATER_E;
	public static Sprite[] WATER_W;

	// player
	public static Sprite[] PLAYER_IDLE_F;
	public static Sprite[] PLAYER_IDLE_R;
	public static Sprite[] PLAYER_IDLE_L;
	public static Sprite[] PLAYER_IDLE_B;
	public static Sprite[] PLAYER_WALK_F;
	public static Sprite[] PLAYER_WALK_R;
	public static Sprite[] PLAYER_WALK_L;
	public static Sprite[] PLAYER_WALK_B;

	// garlic1
	public static Sprite[] GARLIC1_IDLE_R;
	public static Sprite[] GARLIC1_IDLE_L;
	public static Sprite[] GARLIC1_WALK_R;
	public static Sprite[] GARLIC1_WALK_L;

	// eggplant
	public static Sprite[] EGGPLANT_IDLE_F;

	// corn
	public static Sprite[] CORN_SLEEP_CHAIR;
	public static Sprite[] CORN_AWAKE_CHAIR;

	// plants
	public static Sprite SHROOM_DOOR;
	public static Sprite SHROOM_1;
	public static Sprite SHROOM_2;
	public static Sprite SHROOM_3;
	public static Sprite TREE;

	// buildings
	public static Sprite HOUSE_GARLIC;
	public static Sprite HOUSE_ONION;
	public static Sprite HOUSE_CARROT;
	public static Sprite HOUSE_CORN;
	public static Sprite HOUSE_LETTUCE;
	public static Sprite HOUSE_EGGPLANT;

	public static Sprite HOUSE_CHERRY;
	public static Sprite HOUSE_WATERMELON;
	public static Sprite HOUSE_PEAR;
	public static Sprite HOUSE_RASPBERRY;
	public static Sprite HOUSE_BANANA;
	public static Sprite HOUSE_MANGO;

	public static Sprite STALL_MUSH;
	public static Sprite STALL_FISH;
	public static Sprite SCHOOL;
	public static Sprite GYM;
	public static Sprite LIBRARY;
	public static Sprite STOCKHOUSE;
	public static Sprite CLOTHES;
	public static Sprite SALON;

	// menu
	public static Sprite mainTextBG;
	public static Sprite menuMainBG;
	public static Sprite menuMainBGUnselected;
	public static Sprite menuStatsBG;

	// items
	public static Sprite unselected;
	public static Sprite selected;
	public static Sprite mushCube;
	public static Sprite jellyDisc;
	public static Sprite rubbish;

	public static Sprite fruitchip;
	public static Sprite pole;
	public static Sprite groundPole;
	public static Sprite noPole;

	public static Sprite[] FISHING_SPOT;

	// projectiles
	public static Sprite spray;
	public static Sprite stink;

	private int pathX, pathY, w, h;
	private SpriteSheet sheet;

	public Sprite(int pathX, int pathY, int w, int h, SpriteSheet sheet, String a) {
		this.pathX = pathX;
		this.pathY = pathY;
		this.w = w;
		this.h = h;
		this.sheet = sheet;
	}

	public void render(int[] mainPixels, int mainW, int mainH, int offX, int offY, float angle) {
		double c = Math.cos(-angle), s = Math.sin(-angle); // angle in radians
		int x0 = w / 2, y0 = h / 2, x1 = w / 2, y1 = h / 2, xp, yp;

		// get camera boxed in pixels
		int camX = Camera.camera().offX();
		int camY = Camera.camera().offY();
		int camW = Camera.camera().w();
		int camH = Camera.camera().h();
		int skipX = 0;
		int skipY = 0;
		int skipW = 0;
		int skipH = 0;
		if (offX < camX) skipX = camX - offX;
		if (offY < camY) skipY = camY - offY;
		if (offX + w > camX + camW) skipW = (offX + w) - (camX + camW);
		if (offY + h > camY + camH) skipH = (offY + h) - (camY + camH);
		for (int x = skipX; x < w - skipW; x++) {
			for (int y = skipY; y < h - skipH; y++) {
				xp = x;
				yp = y;

				// calculate rotation
				if (angle != 0) {
					xp = x - x0;
					yp = y - y0;
					int xx = (int) ((double) (xp) * c - (double) (yp) * s);
					int yy = (int) ((double) (xp) * s + (double) (yp) * c);
					xp = xx + x1;
					yp = yy + y1;
				}
				if (xp + offX >= 0 && yp + offY >= 0 && xp + offX < mainW && yp + offY < mainH//
						&& xp >= 0 && yp >= 0 && xp < w && yp < h//
						&& ((pixels((xp + pathX) + (yp + pathY) * sheet.w()) >> 24) & 0xff) != 0) {

					// calculate transparency
					if (((pixels((xp + pathX) + (yp + pathY) * sheet.w()) >> 24) & 0xff) < 255) { // if needs alpha
						float alpha = (float) ((pixels((xp + pathX) + (yp + pathY) * sheet.w()) >> 24) & 0xff) / 255f;
						int srcR = ((pixels((xp + pathX) + (yp + pathY) * sheet.w()) >> 16) & 0xff);
						int srcG = ((pixels((xp + pathX) + (yp + pathY) * sheet.w()) >> 8) & 0xff);
						int srcB = ((pixels((xp + pathX) + (yp + pathY) * sheet.w()) >> 0) & 0xff);
						int dstR = ((mainPixels[x + offX + (y + offY) * mainW] >> 16) & 0xff);
						int dstG = ((mainPixels[x + offX + (y + offY) * mainW] >> 8) & 0xff);
						int dstB = ((mainPixels[x + offX + (y + offY) * mainW] >> 0) & 0xff);
						int color = ((int) ((srcR * alpha + dstR * (1 - alpha))) << 16)
								+ ((int) ((srcG * alpha + dstG * (1 - alpha))) << 8)
								+ ((int) ((srcB * alpha + dstB * (1 - alpha))));
						mainPixels[x + offX + (y + offY) * mainW] = color;
					} else {
						mainPixels[x + offX + (y + offY) * mainW] = pixels((xp + pathX) + (yp + pathY) * sheet.w());
					}
				}
			}
		}
	}

	public int w() {
		return w;
	}

	public int h() {
		return h;
	}

	public int pathX() {
		return pathX;
	}

	public int pathY() {
		return pathY;
	}

	public int pixels(int i) {
		return sheet.pixels()[i];
	}

}